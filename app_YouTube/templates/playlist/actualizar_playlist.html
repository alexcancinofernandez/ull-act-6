{% extends "base.html" %}
{% block content %}
<h2>Actualizar Playlist</h2>
<form method="post">
  {% csrf_token %}

  <!-- Nombre -->
  <div class="mb-3">
    <label>Nombre</label>
    <input class="form-control" name="nombre" value="{{ playlist.nombre }}" required>
  </div>

  <!-- Descripción -->
  <div class="mb-3">
    <label>Descripción</label>
    <textarea class="form-control" name="descripcion" rows="3">{{ playlist.descripcion }}</textarea>
  </div>

  
  <div class="mb-3">
    <label>Fecha de creación</label>
    <input type="date" class="form-control" name="fecha_creacion" value="{{ playlist.fecha_creacion|date:'Y-m-d' }}">
  </div>

  <!-- Pública -->
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" name="publica" {% if playlist.publica %}checked{% endif %}>
    <label class="form-check-label">Pública</label>
  </div>

  <!-- Canal creador -->
  <div class="mb-3">
    <label>Canal Creador</label>
    <select name="canal_creador" class="form-control" required>
      {% for canal in canales %}
        <option value="{{ canal.id }}" {% if canal.id == playlist.canal_creador.id %}selected{% endif %}>
          {{ canal.nombre }}
        </option>
      {% endfor %}
    </select>
  </div>

  <!-- Videos -->
  <div class="mb-3">
    <label>Selecciona Videos</label>
    <select name="videos" class="form-control" multiple size="6">
      {% for v in videos %}
      <option value="{{ v.id }}" {% if v in playlist.videos.all %}selected{% endif %}>{{ v.titulo }} ({{ v.canal.nombre }})</option>
      {% endfor %}
    </select>
    <small class="text-muted">Mantén presionada CTRL (o CMD en Mac) para seleccionar varios.</small>
  </div>

  <!-- Orden de Videos -->
  <div class="mb-3">
    <label>Orden de Videos (JSON)</label>
    <textarea class="form-control" name="orden_videos" rows="3" placeholder='Ejemplo: {"orden": [1, 2, 3]}'>{% if playlist.orden_videos %}{{ playlist.orden_videos|safe }}{% endif %}</textarea>
  </div>

  <!-- Número de Videos -->
  <div class="mb-3">
    <label>Número de Videos</label>
    <input type="number" class="form-control" name="n_videos" value="{{ playlist.n_videos }}" min="0">
  </div>

  <button class="btn btn-success" type="submit">Actualizar</button>
  <a class="btn btn-secondary" href="{% url 'ver_playlist' %}">Cancelar</a>
</form>
{% endblock %}
